# 内容

このワークシートではプログラミングにおける*関数*（英語でfunction）の理解を深めます。

プログラミング言語はJavaScriptですが、他のプログラミング言語と書き方はさほど違いはありません。

- セクション１で、すでにある関数をいくつか使ってみます
- セクション２で、関数を作る方法を学びます
- セクション３で、練習問題をやって関数の書き方に慣れます
- セクション４で、別の関数の書き方を学んで、練習問題の関数を書き換えてみます
- セクション５で、すでにある関数から新しい関数を作る方法を学びます

# セクション１ 関数を使ってみよう！

## 問題１ メッセージを表示する関数

ブラウザに「hello!」とメッセージのポップアップを表示させたいです。どうやったら出来ますか？

### ヒント

- ブラウザには ``` window ```という名前の*オブジェクト*と呼ばれるものが入っています（他にもいろんなオブジェクトがあるけど今回は```window```オブジェクトを使います）
- ``` window ```オブジェクトにはいくつかの*関数*と呼ばれるものが付いてきます。
- ``` window ```オブジェクトが持っている関数のに```alert()```という名前の関数があって、指定したテキストをポップアップ形式で表示するのに使えます。

### 実際にやってみよう！　

```javascript
window.alert('hello')
```

### ふりかえり

- ```window``` というオブジェクトに仕事をさせました。このオブジェクトはブラウザがスタートしたら自動的に作れらます
- オブジェクトにはいろんな関数があらかじめ備わっています
- メッセージは*'*記号で囲みました。これを*文字列*と呼びます。英語では character array と呼びます
- メッセージをカッコ（）の中に指定して、関数に*渡し*ました
- 関数に渡すものを*引数*と呼びます。英語ではparemeterとかargumentと呼びます

<br/><br/><br/><br/><br/>

## 問題２ べき乗を計算する関数

算数で習う「2の3乗」とか「5の8乗」とかの計算を「べき乗」といいます。JavaScriptには「べき乗」をやってくれる関数があります。それをつかって「7の5乗」の値を求めましょう。

### ヒント

- この場合はJavaScriptにもともと定義されている Math オブジェクトの```pow()```関数を使います。
- pow は power of の約です。「べき乗」の計算（a の n 乗）をしてくれます。
- pow() 関数は２つの引数を取ります。左から、ひとつ目の引数が基数（a)、ふたつ目の引数が指数（n）です

### 実際にやってみよう！

```javascript
Math.pow(7, 5)
``` 

### ふりかえり

- pow 関数は引数を２つ取りました。このように、引数の数は関数によって異なります（引数をひとつも取らない関数もあります）
- 数値演算に関連した関数はMathオブジェクトに多く定義されています
- 関数によっては「結果」を返すものがあります。この「関数が返す値」を*戻り値（もどりち）*と呼びます。英語では return value と表します。

<br/><br/><br/><br/><br/>

# セクション２ 関数を作ってみよう！

プログラミングとは、ものすごく簡単に言うと「関数を組み合わせて関数を作る仕事」です。

ここでは関数を作る（定義する）やり方を練習します。

## 問題３ 掛け算をする関数を作りましょう

a と x という今はまだ分からない数値を２つ引数として受け取り、掛け算をしてその結果を返す関数を書いてください。

関数には multiply という名前を付けてましょう。関数が出来たら実際に a と x にそれぞれ 3 と 5 を渡して関数を呼び出してみましょう。結果が15なら成功です！

## ヒント

- 関数の名前は ``` var multiply ``` で表します。
- 「a と x という２つの引数を取る」という部分は ```(a, x)``` で表します。引数が複数の場合はコンマで区切ります。
- a と x の掛け算の式は ``` a * x ``` で表します（「掛ける」はXではなく*で表すことに注意しましょう）。
- 全部をまとめて var「関数の名前」=「関するの引数の部分」=> 「関数の式の部分」として表します（実際にやってみると分かりやすいです）

### 実際にやってみよう！

```javascript
var multiply = (a, x) => a * x
multiply(3, 5)
``` 

### ふりかえり

少し難しかったかもしれませんが、少しずつ分解して考えると理解できます。

- ``` var multiply = ``` の部分は*代入*です（英語で assignment ）。これは数値を格納する変数と全く同じ書き方です。*= 記号の右側（右辺）*を*= 記号の左側（左辺）*に*入れる（代わりとして入する）*という意味です。左辺はオブジェクトでなくてはなりません。この場合は multiply という名前のオブジェクトを同時に定義しています
- 右辺は``` (a, x) => a * x``` となっています。この形は (引数）=> 関数の式 という「関数の書き方」です。この記号は「矢」のように見えますね。
- 左辺の式を評価した結果は、関数から呼び出し元に「返されます」。
- 全体を日本語で表すとこうなります：「引数に a と x をとり、その積（掛け算の結果）を返す関数を作って multiply という名前のオブジェクトに保存する」）」のようになります。（英語では define a function named multiply that takes two parameters, a and x, and return a product of the two parameters.）

<br/><br/><br/><br/><br/>

# セクション3 関数の書き方に慣れるように練習してみよう！

ここでは関数の使い方に慣れるように、いくつか練習をします。

最初は良く分からなても、実際に書いてさらに呼び出して使ってみることでだんだんと簡単に思えてくるでしょう。

## 練習４の１

引数を受け取らない関数を作って、```alert()``` 関数を使って```hello```というメッセージを表示してたいです。関数の名前は sayHelloです。

### 実際にやってみよう！

```javascript
var sayHello = () => alert('hello')
sayHello()
``` 

### ふりかえり

簡単ですね、空っぽのカッコを使えばいいだけです「関数の引数 => 関数の式」という形は同じです。

<br/><br/><br/><br/><br/>

## 練習４の２

a と x を足す関数を定義してください。関数の名前は add です。

### 実際にやってみよう！

```javascript
var add = (a, x) => a + x
add(3, 5)
``` 

### ふりかえり

簡単ですよね？次にもう少し複雑な関数を作って見ます

<br/><br/><br/><br/><br/>

## 練習４の３

引数は a と b と x の３つを取り、式が a * x + b になるような関数を作ってください。名前は f1 にしましょう。

関数が出来たら、a=3、b=12、x=5 を引数の値にして f1 呼び出してみましょう。答えが27なら成功です。

### 実際にやってみよう！

```javascript
var f1 = (a, b, x) => a * x + b
f1(3, 12, 5)
``` 

### ふりかえり

どこかの数学の授業で見たことがあるような式が出てきましたね。せっかくなのでもっと数学の授業っぽいのをやってみましょう！

<br/><br/><br/><br/><br/>

## 練習４の４

a と b と c と x を引数にとって、(a * x * x) +　(b * x) + c になるような関数を作ってください。名前は f2 にしましょう。

確認として a=2、b=3、c=4、x=8 で関数 f2 を使って計算してみましょう。

### 実際にやってみよう！

```javascript
var f2 = (a, b, c, x) => (a * x * x) + (b * x) + c
add(2, 3, 4, 8)
``` 

### ふりかえり

これも数学で見たことがありませんか？

ところで「掛け算と足し算が混ざっている式」では掛け算が先に計算される、という算数のルールはプログラミングでも同じです。なので、下のようにカッコ無しでも構いません。

```javascript
var f2 = (a, b, c, x) => a * x * x + b * x + c
``` 

どうですか？慣れてきましたか？

<br/><br/><br/><br/><br/>

# セクション４ 関数のもうひとつの書き方

ここまでは関数では引数を下のように表しました。

``` 
(a, b, c,) => 式
```

引数を ```()```の中に```,```で区切って渡して、関数を定義しいくやり方です。

このスタイルで定義した関数は ```f(2, 3, 5)``` のように呼び出しました。

これとは別に下のような書き方で関数を定義できます。

``` 
(a) => (b) => (c) => 式
```

引数をひとつずつ、```=>``` で区切って関数を定義するやり方です。

このスタイルで定義した関数は ```f(2)(3)``` というやり方で呼び出します。

この```=>```で区切って引数をひとつづつ渡していくスタイルの関数はソフトウェア開発の現場でも重要度が上がってきています。ここまで練習した関数をこの=>を使うスタイルに書き直してみましょう。

# 練習４の１、書き換え

この sayHello 関数は引数を全く取らないので書き換えるものはないです。スキップします。

```javascript
var sayHello = () => alert('hello')
``` 

<br/><br/><br/><br/><br/>

# 練習４の２、書き換え

a と x を足す関数 add を定義してしました。 

```javascript
var add = (a, x) => a + x
add(3, 5)
``` 

これを元に、引数を```=>```で区切るやり方に書き換えましょう。

### 書き換えてみよう

```javascript
add = (a) => (x) => a + x
add(3)(5)
``` 

### ふりかえり

どうですか？簡単ですよね？ 次に進みましょう。

```var```を使っていないことに着目！ var はオブジェクト定義するときに使います。ここでは add という名前のオブジェクトは既にあるので、```var``` を使おうとするとエラーになります。すでにある add に書き直した関数を代入しているのです。

<br/><br/><br/><br/><br/>

# 練習４の３、書き換え

引数は a と b と x の３つを取り、式が a * x + b になるような関数 f1 を作りました。

```javascript
f1 = (a, b, x) => a * x + b
f1(3, 12, 5)
``` 

これを元に、引数を```=>```で区切るやり方に書き換えましょう。

### 書き換えてみよう

```javascript
f1 = (a) => (b) => (x) => a * x + b
f1(3)(12)(5)
``` 

### ふりかえり

これも簡単に書き換えることが出来ました。

ところで、```(a) =>```のカッコ部分は関数が取る引数を表していますが、引数の数が１つの時はカッコを省略して```a =>```と書いても構わないというルールがあります。そのルールを使って、下のようにもっと簡単な書き方も出来ます。

```javascript
f1 = a => b => x => a * x + b
f1(3)(12)(5)
``` 

次は最後の練習の書き換えです。カッコを使わないスタイルで書き直してみましょう。

<br/><br/><br/><br/><br/>

# 練習４の４、書き換え

## 問題

a と b と c と x を引数にとって、(a * x * x) +　(b * x) + c になるような関数 f2 を作りました。

```javascript
var f2 = (a, b, c, x) => (a * x * x) + (b * x) + c
add(2, 3, 4, 8)
``` 

これを元に、引数を```=>```で区切るやり方に書き換えましょう。

### 書き換えてみよう

```javascript
var f2 = a => b => c => x => (a * x * x) + (b * x) + c
add(2)(3)(4)(8)
``` 

### ふりかえり

簡単でしたね。

<br/><br/><br/><br/><br/>


# セクション５ すでにある関数から新しい関数を作る(引数が部分的に分かってる時)

下のような関数を定義したのを覚えていますか？

```
var multiply = (a, x) => a * x
```

または

```
var multiply = a => x => a * x
```

これらの関数を使う時、a が常に 2 だった時に、x が x=1, x=2, x=3, x=4, x=5 の時の値を求めるとすると、下のように書くことが出来ます

```
multiply(2, 1)
multiply(2, 2)
multiply(2, 3)
multiply(2, 4)
multiply(2, 5)
```

もしくは

```
multiply(2)(1)
multiply(2)(2)
multiply(2)(3)
multiply(2)(4)
multiply(2)(5)
```

ここで、なにか面倒なことに気づきますか？そうです、a の引数の値が 2 であることを何度も書かなくてはならないことです。

このセクションでは、すでにある関数で引数が部分的に分かっている時に簡単に書くやり方を学びます。

## 問題 multiply 関数で a=2 の時

前述したとおり、a の引数の値が同じ 2 なのに、何度もそれを関数に渡しているので、一度だけ渡せば済むように、新しい関数 multiplyBy2 を定義してください。今回は => を使うバージョンの multiply を再利用してください。

```
var multiply = a => x => a * x
```

ところで、引数 x はまだ分からない、未知の数のままです。なので、関数 multiplyBy2 は引数を１つだけ取り、その名前は x にしてください。

関数が出来たら、x に、1, 2, 3, 4, 5 を当てはめて結果がすべて２倍になっていることを確認しましょう

### 実際にやってみよう！

```javascript
var multiplyBy2 = multiply(2)
multiplyBy2(1)
multiplyBy2(2)
multiplyBy2(3)
multiplyBy2(4)
multiplyBy2(5)
``` 

### ふりかえり

- １行目で右辺が ```multipl(2)(?)``` ではなく ```multipl(2)``` で止めていることに注目してください。
- これは a=2 で固定したけれど、x についてはまだ未知のままであることを表しています。未知なので、呼び出すことすら出来ません。
- ```multiplyBy2```に代入したのは x を取る関数なので、```multiplyBy2(1)```といった感じで５回呼び出しています。
- このやり方で multyBy3 や multiBy4 や multiByPI なども、同じ multiply 関数で作ることが出来ます

<br/><br/><br/><br/><br/>

## 問題 f2 で a=2、b=3、c=4 の時

下のような少し複雑な関数も定義しました。

```
var f2 = a => b => c => x => (a * x * x) + (b * x) + c
```

この関数も同じ要領で簡略化できます。

引数の値が、 a=2、b=3、c=4、で、x が 1, 2, 3, 4, 5の時の値をそれぞれ求めるために、新しい関数 f3 を定義しましょう。



## 問題

今回は、すでに定義した下のような関数再利用します。

```
var f2 = (a, b, c, x) => a * x * x + b * x + c
```

関数が出来たら、x に、1, 2, 3, 4, 5 を当てはめて結果を確認してみよう。（これ、学校の宿題でも使えそうですね？例えばグラフを書く宿題）

### 実際にやってみよう！

```javascript
var f3 = f2(2)(3)(4)
f3(1)
f3(2)
f3(3)
f3(4)
f3(5)
``` 
### ふりかえり

とても簡単でしょう？ 関数f3 は 関数f2の a と b と c の値が固定されている、でも x の値はまだ分からない、関数です。

このパターンを使えば学校の数学の宿題で a, b, c の値が違う問題も簡単に解くことが出来ますね。


これは 数学で習う

<img src='https://latex.codecogs.com/svg.latex?\Large&space;\f(x)%20=%20ax^2%20+%20bx%20+%20c'>


------


# おまけ

時間がたったら関数が呼び出されるようにする

# 問題

これまでは、関数を呼び出すのはコンソールに入力してEnterキーを押した瞬間でした。

今回はタイマーを仕掛けて、５秒たったら alert 関数を呼び出して time to go! というメッセージを表示するようにプログラミングしましょう。

### ヒント

- window オブジェクトに setTimeout という関数があります。この関数を使うと、指定した時間が経過したら、指定した関数が自動的に呼び出されるように出来ます。
- setTimout の引数は２つです。一つ目は関数です。これまで使ってきた「関数の引数」=>「関数の式」の書き方で関数を渡すことができます。この渡す関数は引数の数がゼロです。その場合空白のカッコ（）を使います
- setTimeout のもう１つの引数は、タイマーの時間をミリ秒単位で表した値です。例えば1000を渡すと1000ミリ秒つまり１秒のタイマーになります

<br/><br/><br/><br/><br/>

実際にやってみよう！　

```
setTimeout(() => alert('time to go'), 5000)
```

<br/><br/><br/><br/><br/>
